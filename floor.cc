#include "floor.h"
#include "tile.h"
#include <string>
#include <sstream>
#include <vector>
using namespace std;

void Floor::init() {
    string defaultMap = 
    "|-----------------------------------------------------------------------------|"
    "|                                                                             |"
    "| |--------------------------|        |-----------------------|               |"
    "| |..........................|        |.......................|               |"
    "| |..........................+########+.......................|-------|       |"
    "| |..........................|   #    |...............................|--|    |"
    "| |..........................|   #    |..................................|--| |"
    "| |----------+---------------|   #    |----+----------------|...............| |"
    "|            #                 #############                |...............| |"
    "|            #                 #     |-----+------|         |...............| |"
    "|            #                 #     |............|         |...............| |"
    "|            ###################     |............|   ######+...............| |"
    "|            #                 #     |............|   #     |...............| |"
    "|            #                 #     |-----+------|   #     |--------+------| |"
    "|  |---------+-----------|     #           #          #              #        |"
    "|  |.....................|     #           #          #         |----+------| |"
    "|  |.....................|     ########################         |...........| |"
    "|  |.....................|     #           #                    |...........| |"
    "|  |.....................|     #    |------+--------------------|...........| |"
    "|  |.....................|     #    |.......................................| |"
    "|  |.....................+##########+.......................................| |"
    "|  |.....................|          |.......................................| |"
    "|  |---------------------|          |---------------------------------------| |"
    "|                                                                             |"
    "|-----------------------------------------------------------------------------|";
    istringstream iss(defaultMap);

    char c;
    int id;

    for (int y = 0; y < 25; y++) {
        vector<Tile *> tmp;
        for (int x = 0; x < 79; x++) {
            iss >> c;
            if (c == ' ') id = 0; 
            if (c == '-') id = 1;
            if (c == '|') id = 0;
            if (c == '#') id = 0;
            if (c == '+') id = 0;
            tmp.push_back(new Tile(x, y, id));
        }
        map.push_back(tmp);
    }    
}

// how do we initialize our floor to have the default map.
// idea: have a string with our default map
// make the string into a stringstream, and read off one char at a time to populate the vector we want to initialize
